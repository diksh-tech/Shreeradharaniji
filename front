1. package.json
json
{
  "name": "flightops-frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint . --ext js,jsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "lucide-react": "^0.263.1"
  },
  "devDependencies": {
    "@types/react": "^18.2.15",
    "@types/react-dom": "^18.2.7",
    "@vitejs/plugin-react": "^4.0.3",
    "autoprefixer": "^10.4.14",
    "eslint": "^8.45.0",
    "eslint-plugin-react": "^7.32.2",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.3",
    "postcss": "^8.4.27",
    "tailwindcss": "^3.3.3",
    "vite": "^4.4.5"
  }
}
2. tailwind.config.js
js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  darkMode: 'class',
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#eff6ff',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
        }
      }
    },
  },
  plugins: [],
}
3. postcss.config.js
js
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
4. vite.config.js
js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/agent': 'http://localhost:8000',
      '/sessions': 'http://localhost:8000',
      '/chat-history': 'http://localhost:8000',
    }
  }
})
5. src/index.css
css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
  }
}
6. src/main.jsx
jsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
7. src/App.jsx
jsx
import React, { useState, useEffect, useRef } from 'react'
import Sidebar from './components/Sidebar'
import MessageBubble from './components/MessageBubble'
import RouteSelection from './components/RouteSelection'
import StatusIndicator from './components/StatusIndicator'
import TokenUsage from './components/TokenUsage'
import { Send, Plus, Moon, Sun } from 'lucide-react'

function App() {
  const [sessions, setSessions] = useState([])
  const [currentSession, setCurrentSession] = useState(null)
  const [messages, setMessages] = useState([])
  const [inputMessage, setInputMessage] = useState('')
  const [isLoading, setIsLoading] = useState(false)
  const [agentState, setAgentState] = useState({
    phase: 'idle',
    progress_pct: 0,
    message: 'Ready'
  })
  const [tokenUsage, setTokenUsage] = useState({
    planning: null,
    summarization: null,
    total: null
  })
  const [routeSelection, setRouteSelection] = useState(null)
  const [darkMode, setDarkMode] = useState(false)
  const messagesEndRef = useRef(null)

  // Load chat history on app start
  useEffect(() => {
    fetchChatHistory()
  }, [])

  // Scroll to bottom when messages change
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })
  }, [messages])

  // Apply dark mode
  useEffect(() => {
    if (darkMode) {
      document.documentElement.classList.add('dark')
    } else {
      document.documentElement.classList.remove('dark')
    }
  }, [darkMode])

  const fetchChatHistory = async () => {
    try {
      const response = await fetch('/chat-history')
      const data = await response.json()
      setSessions(data.sessions || [])
    } catch (error) {
      console.error('Failed to fetch chat history:', error)
    }
  }

  const createNewSession = () => {
    const newSession = {
      id: `thread-${Date.now()}`,
      title: 'New Conversation',
      created_at: Date.now() / 1000,
      last_activity: Date.now() / 1000,
      user_query: '',
      message_count: 0
    }
    setCurrentSession(newSession)
    setMessages([])
    setTokenUsage({ planning: null, summarization: null, total: null })
    setRouteSelection(null)
  }

  const loadSession = async (sessionId) => {
    try {
      const response = await fetch(`/sessions/${sessionId}/messages`)
      const data = await response.json()
      setMessages(data.messages || [])
      
      const session = sessions.find(s => s.id === sessionId)
      setCurrentSession(session)
      setRouteSelection(null)
    } catch (error) {
      console.error('Failed to load session:', error)
    }
  }

  const handleSendMessage = async (message = inputMessage) => {
    if (!message.trim() || isLoading) return

    const userMessage = {
      id: `msg-${Date.now()}`,
      role: 'user',
      content: message,
      timestamp: Date.now()
    }

    setMessages(prev => [...prev, userMessage])
    setInputMessage('')
    setIsLoading(true)
    setRouteSelection(null)
    setTokenUsage({ planning: null, summarization: null, total: null })

    // Create or update current session
    let sessionId = currentSession?.id || `thread-${Date.now()}`
    if (!currentSession) {
      const newSession = {
        id: sessionId,
        title: `Query: ${message.substring(0, 50)}...`,
        created_at: Date.now() / 1000,
        last_activity: Date.now() / 1000,
        user_query: message,
        message_count: 1
      }
      setCurrentSession(newSession)
      setSessions(prev => [newSession, ...prev])
    }

    try {
      const response = await fetch('/agent', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          thread_id: sessionId,
          run_id: `run-${Date.now()}`,
          messages: [{ role: 'user', content: message }]
        })
      })

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`)
      }

      const reader = response.body.getReader()
      const decoder = new TextDecoder()
      let buffer = ''

      while (true) {
        const { done, value } = await reader.read()
        if (done) break

        buffer += decoder.decode(value, { stream: true })
        const lines = buffer.split('\n\n')
        buffer = lines.pop() || ''

        for (const line of lines) {
          if (line.startsWith('data: ')) {
            try {
              const eventData = JSON.parse(line.substring(6))
              handleSSEEvent(eventData, sessionId)
            } catch (e) {
              console.error('Error parsing SSE event:', e)
            }
          }
        }
      }

    } catch (error) {
      console.error('Error sending message:', error)
      setMessages(prev => [...prev, {
        id: `msg-${Date.now()}`,
        role: 'system',
        content: `Error: ${error.message}`,
        timestamp: Date.now()
      }])
    } finally {
      setIsLoading(false)
      fetchChatHistory() // Refresh sidebar
    }
  }

  const handleSSEEvent = (event, sessionId) => {
    switch (event.type) {
      case 'RUN_STARTED':
        setAgentState({
          phase: 'thinking',
          progress_pct: 5,
          message: 'Starting analysis...'
        })
        break

      case 'STATE_UPDATE':
        setAgentState(event.state)
        break

      case 'TOOL_CALL_START':
        setMessages(prev => [...prev, {
          id: event.toolCallId,
          role: 'tool',
          content: '',
          toolCallName: event.toolCallName,
          timestamp: Date.now(),
          isStreaming: true
        }])
        break

      case 'TOOL_CALL_ARGS':
        setMessages(prev => prev.map(msg => 
          msg.id === event.toolCallId 
            ? { ...msg, toolArgs: JSON.parse(event.delta) }
            : msg
        ))
        break

      case 'TOOL_CALL_RESULT':
        setMessages(prev => prev.map(msg => 
          msg.id === event.message.tool_call_id
            ? { 
                ...msg, 
                content: JSON.stringify(JSON.parse(event.message.content), null, 2),
                isStreaming: false
              }
            : msg
        ))
        break

      case 'TOOL_CALL_END':
        // Tool call complete
        break

      case 'ROUTE_SELECTION_OPTIONS':
        setRouteSelection({
          routes: event.routes,
          message: event.message,
          session_id: event.session_id,
          run_id: event.run_id
        })
        break

      case 'TEXT_MESSAGE_CONTENT':
        if (event.message.delta) {
          // Streaming content
          setMessages(prev => {
            const existingMsgIndex = prev.findIndex(msg => msg.id === event.message.id)
            if (existingMsgIndex >= 0) {
              const updated = [...prev]
              updated[existingMsgIndex] = {
                ...updated[existingMsgIndex],
                content: (updated[existingMsgIndex].content || '') + event.message.delta,
                isStreaming: true
              }
              return updated
            } else {
              return [...prev, {
                id: event.message.id,
                role: event.message.role,
                content: event.message.delta,
                timestamp: Date.now(),
                isStreaming: true
              }]
            }
          })
        } else if (event.message.content === '') {
          // Start of new message
          setMessages(prev => [...prev, {
            id: event.message.id,
            role: event.message.role,
            content: '',
            timestamp: Date.now(),
            isStreaming: true
          }])
        } else {
          // Complete message
          setMessages(prev => prev.map(msg => 
            msg.id === event.message.id
              ? { ...msg, content: event.message.content, isStreaming: false }
              : msg
          ))
        }
        break

      case 'TOKEN_USAGE':
        setTokenUsage(prev => ({
          ...prev,
          [event.phase]: event.usage
        }))
        break

      case 'RUN_FINISHED':
        setIsLoading(false)
        setAgentState({
          phase: 'finished',
          progress_pct: 100,
          message: 'Analysis complete'
        })
        break

      case 'RUN_ERROR':
        setIsLoading(false)
        setMessages(prev => [...prev, {
          id: `msg-${Date.now()}`,
          role: 'system',
          content: `Error: ${event.error}`,
          timestamp: Date.now()
        }])
        break

      default:
        console.log('Unhandled event type:', event.type)
    }
  }

  const handleRouteSelect = async (routeIndex) => {
    if (!routeSelection) return

    try {
      const response = await fetch(`/sessions/${routeSelection.session_id}/select-route`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ route_index: routeIndex })
      })

      const result = await response.json()

      if (result.status === 'success') {
        // Add route selection as user message
        setMessages(prev => [...prev, {
          id: `msg-${Date.now()}`,
          role: 'user',
          content: `Selected route: ${result.selected_route.display}`,
          timestamp: Date.now()
        }])

        // Add LLM summary as assistant message
        if (result.llm_summary) {
          setMessages(prev => [...prev, {
            id: `msg-${Date.now() + 1}`,
            role: 'assistant',
            content: result.llm_summary,
            timestamp: Date.now()
          }])
        }

        // Update token usage if available
        if (result.summarization_usage) {
          setTokenUsage(prev => ({
            ...prev,
            summarization: result.summarization_usage
          }))
        }

        setRouteSelection(null)
        fetchChatHistory() // Refresh sidebar
      }
    } catch (error) {
      console.error('Error selecting route:', error)
    }
  }

  const handleKeyPress = (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault()
      handleSendMessage()
    }
  }

  return (
    <div className="min-h-screen">
      <div className="flex h-screen bg-gray-50 dark:bg-gray-900">
        {/* Sidebar */}
        <Sidebar
          sessions={sessions}
          currentSession={currentSession}
          onSelectSession={loadSession}
          onNewSession={createNewSession}
        />

        {/* Main Chat Area */}
        <div className="flex-1 flex flex-col">
          {/* Header */}
          <header className="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 p-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center space-x-4">
                <h1 className="text-xl font-semibold text-gray-900 dark:text-white">
                  FlightOps Assistant
                </h1>
                <StatusIndicator state={agentState} />
              </div>
              <div className="flex items-center space-x-2">
                <TokenUsage usage={tokenUsage} />
                <button
                  onClick={() => setDarkMode(!darkMode)}
                  className="p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
                >
                  {darkMode ? <Sun size={20} /> : <Moon size={20} />}
                </button>
              </div>
            </div>
          </header>

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-4 space-y-4">
            {messages.length === 0 && !isLoading && (
              <div className="flex items-center justify-center h-full">
                <div className="text-center text-gray-500 dark:text-gray-400">
                  <div className="text-6xl mb-4">✈️</div>
                  <h3 className="text-xl font-semibold mb-2">Welcome to FlightOps</h3>
                  <p>Ask about flight information, delays, equipment, or passenger data</p>
                </div>
              </div>
            )}

            {messages.map((message) => (
              <MessageBubble key={message.id} message={message} />
            ))}

            {/* Route Selection Component */}
            {routeSelection && (
              <RouteSelection
                routes={routeSelection.routes}
                message={routeSelection.message}
                onSelect={handleRouteSelect}
              />
            )}

            <div ref={messagesEndRef} />
          </div>

          {/* Input Area */}
          <div className="border-t border-gray-200 dark:border-gray-700 p-4">
            <div className="flex space-x-4">
              <div className="flex-1">
                <textarea
                  value={inputMessage}
                  onChange={(e) => setInputMessage(e.target.value)}
                  onKeyPress={handleKeyPress}
                  placeholder="Ask about flight information..."
                  className="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"
                  rows="2"
                  disabled={isLoading}
                />
              </div>
              <button
                onClick={() => handleSendMessage()}
                disabled={isLoading || !inputMessage.trim()}
                className="px-6 py-3 bg-blue-500 text-white rounded-2xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2"
              >
                <Send size={20} />
                <span>Send</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

export default App
8. src/components/Sidebar.jsx
jsx
import React from 'react'
import { Plus, MessageCircle, Calendar } from 'lucide-react'

const Sidebar = ({ sessions, currentSession, onSelectSession, onNewSession }) => {
  const formatTime = (timestamp) => {
    const date = new Date(timestamp * 1000)
    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { 
      hour: '2-digit', 
      minute: '2-digit' 
    })
  }

  return (
    <div className="w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col">
      {/* Header */}
      <div className="p-4 border-b border-gray-200 dark:border-gray-700">
        <button
          onClick={onNewSession}
          className="w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors"
        >
          <Plus size={20} />
          <span>New Session</span>
        </button>
      </div>

      {/* Sessions List */}
      <div className="flex-1 overflow-y-auto">
        {sessions.length === 0 ? (
          <div className="p-4 text-center text-gray-500 dark:text-gray-400">
            <MessageCircle size={48} className="mx-auto mb-2 opacity-50" />
            <p>No conversations yet</p>
            <p className="text-sm">Start a new session to begin</p>
          </div>
        ) : (
          <div className="p-2 space-y-2">
            {sessions.map((session) => (
              <button
                key={session.id}
                onClick={() => onSelectSession(session.id)}
                className={`w-full text-left p-3 rounded-xl transition-colors ${
                  currentSession?.id === session.id
                    ? 'bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800'
                    : 'hover:bg-gray-50 dark:hover:bg-gray-700'
                }`}
              >
                <div className="flex items-start space-x-3">
                  <MessageCircle 
                    size={20} 
                    className={`mt-1 flex-shrink-0 ${
                      currentSession?.id === session.id 
                        ? 'text-blue-500' 
                        : 'text-gray-400'
                    }`} 
                  />
                  <div className="flex-1 min-w-0">
                    <h3 className="font-medium text-gray-900 dark:text-white truncate">
                      {session.title}
                    </h3>
                    {session.user_query && (
                      <p className="text-sm text-gray-500 dark:text-gray-400 truncate">
                        {session.user_query}
                      </p>
                    )}
                    <div className="flex items-center space-x-2 mt-1 text-xs text-gray-400">
                      <Calendar size={12} />
                      <span>{formatTime(session.last_activity)}</span>
                      <span>•</span>
                      <span>{session.message_count} messages</span>
                    </div>
                  </div>
                </div>
              </button>
            ))}
          </div>
        )}
      </div>
    </div>
  )
}

export default Sidebar
9. src/components/MessageBubble.jsx
jsx
import React from 'react'
import { User, Bot, Cpu, AlertCircle } from 'lucide-react'

const MessageBubble = ({ message }) => {
  const getIcon = (role) => {
    switch (role) {
      case 'user':
        return <User size={16} className="text-blue-500" />
      case 'assistant':
        return <Bot size={16} className="text-green-500" />
      case 'tool':
        return <Cpu size={16} className="text-purple-500" />
      case 'system':
        return <AlertCircle size={16} className="text-yellow-500" />
      default:
        return <Bot size={16} />
    }
  }

  const getBubbleStyles = (role) => {
    const baseStyles = "px-4 py-3 rounded-2xl"
    
    switch (role) {
      case 'user':
        return `${baseStyles} bg-blue-500 text-white rounded-tr-none`
      case 'assistant':
        return `${baseStyles} bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-tl-none`
      case 'tool':
        return `${baseStyles} bg-purple-100 dark:bg-purple-900 text-purple-900 dark:text-purple-100 rounded-tl-none border border-purple-200 dark:border-purple-700`
      case 'system':
        return `${baseStyles} bg-yellow-100 dark:bg-yellow-900 text-yellow-900 dark:text-yellow-100`
      default:
        return `${baseStyles} bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-tl-none`
    }
  }

  const formatContent = (content, role) => {
    if (role === 'tool' && typeof content === 'string') {
      try {
        const parsed = JSON.parse(content)
        return (
          <pre className="text-xs whitespace-pre-wrap">
            {JSON.stringify(parsed, null, 2)}
          </pre>
        )
      } catch {
        return content
      }
    }
    return content
  }

  return (
    <div className={`flex space-x-3 ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}>
      {message.role !== 'user' && (
        <div className="flex-shrink-0">
          <div className="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
            {getIcon(message.role)}
          </div>
        </div>
      )}
      
      <div className={`max-w-3xl ${message.role === 'user' ? 'order-first' : ''}`}>
        <div className={getBubbleStyles(message.role)}>
          <div className="prose dark:prose-invert max-w-none">
            {formatContent(message.content, message.role)}
          </div>
          {message.isStreaming && (
            <div className="inline-block w-2 h-4 bg-current opacity-60 ml-1 animate-pulse" />
          )}
        </div>
        
        {/* Tool arguments */}
        {message.toolArgs && (
          <div className="mt-1 text-xs text-gray-500 dark:text-gray-400">
            <details>
              <summary className="cursor-pointer hover:text-gray-700 dark:hover:text-gray-300">
                View tool arguments
              </summary>
              <pre className="mt-1 p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs overflow-x-auto">
                {JSON.stringify(message.toolArgs, null, 2)}
              </pre>
            </details>
          </div>
        )}
        
        <div className="text-xs text-gray-400 mt-1">
          {new Date(message.timestamp).toLocaleTimeString()}
        </div>
      </div>

      {message.role === 'user' && (
        <div className="flex-shrink-0">
          <div className="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center">
            <User size={16} className="text-white" />
          </div>
        </div>
      )}
    </div>
  )
}

export default MessageBubble
10. src/components/RouteSelection.jsx
jsx
import React, { useState } from 'react'
import { MapPin, Plane, Check } from 'lucide-react'

const RouteSelection = ({ routes, message, onSelect }) => {
  const [selectedIndex, setSelectedIndex] = useState(null)

  const handleSelect = (index) => {
    setSelectedIndex(index)
    onSelect(index)
  }

  return (
    <div className="flex justify-start">
      <div className="max-w-2xl w-full">
        <div className="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl p-6 shadow-lg">
          <div className="flex items-center space-x-3 mb-4">
            <div className="w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center">
              <MapPin className="text-blue-600 dark:text-blue-400" size={20} />
            </div>
            <div>
              <h3 className="font-semibold text-gray-900 dark:text-white">Route Selection Required</h3>
              <p className="text-gray-600 dark:text-gray-400 text-sm">{message}</p>
            </div>
          </div>

          <div className="space-y-3">
            {routes.map((route, index) => (
              <button
                key={index}
                onClick={() => handleSelect(index)}
                disabled={selectedIndex !== null}
                className={`w-full p-4 rounded-xl border-2 transition-all ${
                  selectedIndex === index
                    ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'
                    : 'border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-600'
                } ${selectedIndex !== null && selectedIndex !== index ? 'opacity-50' : ''}`}
              >
                <div className="flex items-center justify-between">
                  <div className="flex items-center space-x-4">
                    <div className="flex items-center space-x-2">
                      <div className="w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center">
                        <Plane size={16} className="text-blue-600 dark:text-blue-400" />
                      </div>
                      <div className="text-left">
                        <div className="font-semibold text-gray-900 dark:text-white">
                          {route.startStation} → {route.endStation}
                        </div>
                        <div className="text-sm text-gray-500 dark:text-gray-400">
                          {route.carrier} {route.flightNumber} • {route.dateOfOrigin}
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  {selectedIndex === index && (
                    <Check size={20} className="text-green-500" />
                  )}
                </div>
                
                {(route.scheduledStartTime || route.scheduledEndTime) && (
                  <div className="mt-2 text-xs text-gray-500 dark:text-gray-400">
                    {route.scheduledStartTime && `Depart: ${route.scheduledStartTime}`}
                    {route.scheduledEndTime && ` • Arrive: ${route.scheduledEndTime}`}
                  </div>
                )}
              </button>
            ))}
          </div>

          {selectedIndex !== null && (
            <div className="mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg">
              <div className="flex items-center space-x-2 text-green-700 dark:text-green-400">
                <Check size={16} />
                <span className="text-sm font-medium">
                  Route selected! Processing your request...
                </span>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  )
}

export default RouteSelection
11. src/components/StatusIndicator.jsx
jsx
import React from 'react'
import { Brain, Cpu, Type, Clock, CheckCircle, AlertCircle } from 'lucide-react'

const StatusIndicator = ({ state }) => {
  const getIcon = (phase) => {
    switch (phase) {
      case 'thinking':
        return <Brain size={16} className="text-purple-500" />
      case 'processing':
        return <Cpu size={16} className="text-blue-500" />
      case 'typing':
        return <Type size={16} className="text-green-500" />
      case 'waiting_for_input':
        return <Clock size={16} className="text-yellow-500" />
      case 'finished':
        return <CheckCircle size={16} className="text-green-500" />
      case 'error':
        return <AlertCircle size={16} className="text-red-500" />
      default:
        return <Clock size={16} className="text-gray-500" />
    }
  }

  const getPhaseText = (phase) => {
    switch (phase) {
      case 'thinking':
        return 'Analyzing query...'
      case 'processing':
        return 'Running tools...'
      case 'typing':
        return 'Generating response...'
      case 'waiting_for_input':
        return 'Waiting for input...'
      case 'finished':
        return 'Complete'
      case 'error':
        return 'Error occurred'
      default:
        return 'Ready'
    }
  }

  return (
    <div className="flex items-center space-x-3 px-3 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
      <div className="flex items-center space-x-2">
        {getIcon(state.phase)}
        <span className="text-sm font-medium text-gray-700 dark:text-gray-300">
          {getPhaseText(state.phase)}
        </span>
      </div>
      
      {state.message && state.phase !== 'idle' && (
        <>
          <div className="w-px h-4 bg-gray-300 dark:bg-gray-600" />
          <span className="text-sm text-gray-500 dark:text-gray-400">
            {state.message}
          </span>
        </>
      )}
      
      {state.progress_pct > 0 && state.phase !== 'finished' && (
        <>
          <div className="w-px h-4 bg-gray-300 dark:bg-gray-600" />
          <div className="flex items-center space-x-2">
            <div className="w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2">
              <div 
                className="bg-blue-500 h-2 rounded-full transition-all duration-300"
                style={{ width: `${state.progress_pct}%` }}
              />
            </div>
            <span className="text-xs text-gray-500 dark:text-gray-400 w-8">
              {state.progress_pct}%
            </span>
          </div>
        </>
      )}
    </div>
  )
}

export default StatusIndicator
12. src/components/TokenUsage.jsx
jsx
import React from 'react'
import { Cpu, Brain, Hash } from 'lucide-react'

const TokenUsage = ({ usage }) => {
  const formatNumber = (num) => {
    if (!num) return '0'
    return num.toLocaleString()
  }

  const hasUsage = usage.planning || usage.summarization || usage.total

  if (!hasUsage) {
    return null
  }

  return (
    <div className="flex items-center space-x-4 text-xs">
      {usage.planning && (
        <div className="flex items-center space-x-1" title="Planning Tokens">
          <Brain size={14} className="text-purple-500" />
          <span className="text-gray-600 dark:text-gray-400">
            Plan: {formatNumber(usage.planning.prompt_tokens)}/{formatNumber(usage.planning.completion_tokens)}
          </span>
        </div>
      )}
      
      {usage.summarization && (
        <div className="flex items-center space-x-1" title="Summarization Tokens">
          <Cpu size={14} className="text-blue-500" />
          <span className="text-gray-600 dark:text-gray-400">
            Summary: {formatNumber(usage.summarization.prompt_tokens)}/{formatNumber(usage.summarization.completion_tokens)}
          </span>
        </div>
      )}
      
      {usage.total && (
        <div className="flex items-center space-x-1" title="Total Tokens">
          <Hash size={14} className="text-green-500" />
          <span className="text-gray-600 dark:text-gray-400 font-medium">
            Total: {formatNumber(usage.total.total_tokens)}
          </span>
        </div>
      )}
    </div>
  )
}

export default TokenUsage
13. index.html
html
<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FlightOps Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>
  <body class="h-full">
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
